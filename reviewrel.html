<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Review Card</title>
    <style>
        /* Card container setup */
        #card-container {
            width: 50vw; /* 50% of viewport width */
            height: 70vh; /* 70% of viewport height */
            position: relative;
            border: 1px solid #000;
            background-color: grey;
        }

        /* Background image styling */
        #background {
            width: 100%;
            height: 50vh; /* 50% of viewport height */
            position: absolute;
            top: 0;
            left: 0;
            display: none;
        }

        /* Text area without background */
        #text-area {
            position: absolute;
            top: 50vh; /* Start below the background image */
            left: 0;
            width: 100%;
            height: 20vh; /* 20% of viewport height */
            background-color: transparent;
        }

        /* Style for text fields */
        .text-field {
            position: absolute;
            cursor: move;
            border: 1px dashed #000;
            padding: 5px;
        }

        /* Other styles */
        #background-selector {
            margin-left: 10px;
        }

        #background-images {
            margin-top: 10px;
        }

        /* Style for the font options */
        #font-options {
            margin-top: 10px;
        }

        @media print {
            body {
                margin: 0;
                display: flex;
                align-items: center;
                justify-content: center;
                height: 100vh;
                width: 100vw;
            }
            #card-container, img {
                border: 1px solid #000;
            }
            @page {
                margin: 0;
            }
        }
    </style>
</head>
<body>
    <div id="card-container">
        <!-- The card content will be loaded here -->
    </div>

    <!-- Back to Edit Card Button -->
    <button onclick="backToEditCard()" style="margin-top: 20px;">Back to Edit Card</button>

    <!-- Pay Button -->
    <button onclick="redirectToPayment()" style="margin-top: 20px;">Pay</button>

    <script>
        // Function to load the card content from localStorage and display it
        function loadCard() {
            const cardHTML = localStorage.getItem('cardHTML');
            
            if (cardHTML) {
                const cardContainer = document.getElementById('card-container');
                cardContainer.innerHTML = cardHTML;

                // Ensure the background image is visible
                const backgroundImage = cardContainer.querySelector('#background');
                if (backgroundImage) {
                    backgroundImage.style.display = 'block';
                }
            } else {
                console.error('No card data found in localStorage');
            }
        }

        // Function to go back to the home page for editing
        function backToEditCard() {
            window.location.href = '/'; // Redirect back to the home page
        }

        // Function to redirect to the payment page
        function redirectToPayment() {
            window.location.href = '/final'; // Redirect to the "Final" page
        }

        // Call the loadCard function on page load
        window.onload = loadCard;
    </script>
</body>
</html>
